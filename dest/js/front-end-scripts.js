(function(n){n(document).ready(function(){const f=raffle.ajaxurl,c=raffle.stripeKey;let a=null,r=null;if(c){a=Stripe(raffle.stripeKey);const t=a.elements(),o={base:{iconColor:"#fff",color:"#fff",fontWeight:"400",fontFamily:'"Clash Display", "Arial", "Helvetica", sans-serif',fontSize:"16px","::placeholder":{color:"#fff"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}};r=t.create("card",{style:o,hidePostalCode:!0});let e="#gc_credit_card";n(e).length&&r.mount(e)}const s=n(".gc_popup__form_payment");s.length&&n(s).on("submit",function(t){t.preventDefault();const o=new FormData(n(this)[0]);o.append("action","promotion_sign_up"),o.append("nonce",raffle.nonce),c&&a&&r&&a.createToken(r).then(function(e){e.error?console.log(e.error.message):o.append("gc_stripe_token",e.token.id)}),l(o)});function l(t){const o=n(".gc_popup");jQuery.ajax({type:"POST",url:f,data:t,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){n(o).addClass("_spinner")},success:function(e){n(o).removeClass("_spinner"),e&&e.message&&console.log(e.message)},error:function(e){console.log("error",e)}})}})})(jQuery);
